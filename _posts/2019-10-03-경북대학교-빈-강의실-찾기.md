---
layout: single
title: "경북대학교 빈 강의실 찾기"
date: 2019-10-03T23:47:46+09:00
tags: dev
---

요즘은 레전드인생을 살고 있다. PS 문제를 마지막으로 잡은지 한 달이 넘었고, 코포나 앳코더는 언제가 마지막인지 기억도 안 난다. 열정이 식은 상태 그대로이다. 저번 대회 이후로 PS에 아예 손을 놔 버렸다.  

이렇게 방황할 시간에 뭐라도 만들어보고 싶어서, 생각해두었던 걸 만들어보기로 했다. '이런 걸 만들어보고 싶다' 같은 아이디어들은 따로 메모해두곤 하는데, 오랜만에 토이프로젝트 하나를 잡았다.  

사실 아이디어는 거창한 게 아니다. '빈 강의실 찾기' 자체는 이미 많이들 시도하는 프로젝트 중 하나로 알고 있다. 우리 학교 것도 찾아보면 누군가 만들었을 것이다. 더군다나 단순 시간표 파싱에 해당 시간에 강의가 있는지 없는지 따지는 거라면 그냥 단순한 학부생 프로젝트 이상도, 이하도 아니다. 난이도도 어렵지 않다.  

익숙하지 않은 기술을 익힐 겸, 안 쓰던 기술로 만들어보고 싶었다. Sinatra나 Flask는 신물이 날 정도이다. 그래서 결국 Node.js + Express + MongoDB 연습 겸 토이프로젝트가 되었다.  

그래도 알음알음 알고 있던 지식을 갖고 처음으로 도전해 본 완성된 node.js 프로젝트이다. 노드 + 몽고디비 연습은 충분히 되었다.  

* package.json의 대략적인 이해. dependencies뿐만 아니라 scripts, license 등 여러 항목이 들어갈 수 있고, 패키지를 배포할 때도 쓰이는 듯하다.
* Express와 라우터의 사용법, 프로젝트의 대략적인 구조. (써 오던 것들과 매우 비슷하다고 생각했다. 겁 먹을 게 하나도 없다.)
* MongoDB의 대략적인 구조. db -> collection -> document (자료형도 깔끔해서 너무 좋았다.)
* node.js의 MongoDB 라이브러리 Mongoose, DB 연결은 어느 시점에서 하는지, ODM.
* Scheme와 Model을 먼저 만들어야 한다. 
* collection 이름을 요청 때마다 바꿀 수 없다. 애초에 네이밍 컨벤션이 따로 있고, 내가 생각했던 그런 방식으로 쓰라고 만든 게 아니다. 1모델 1컬렉션?이 맞는 듯.
* 구성만 잘 하면 CRUD 하는 건 쉽다. 옛날 php 쓰던 시절 생각이 잠깐 났다.
* PhantomJS는 **단독실행되는** 자바스크립트 라이브러리이다. /rebuild으로 요청을 보내면 시간표 정보를 새로 가져와서 DB를 리빌드하는 걸 생각했었는데, node.js 서버 자체에서 웹 크롤링하는 부분을 어떻게 해도 만들 수 없었다. JS로 모든 걸 끝내고 싶었는데, 애초에 라이브러리의 이해를 잘못 하고 있었다. (결국 시간표 정보를 새로 가져와서 DB를 갱신하는 파이썬 스크립트를 따로 짜기로 했다. 막상 하다보니 웹 자동화 하는 것도 여간 귀찮은 게 아니라서, 시간표 엑셀파일을 파싱하는 것으로 대체했다.)  

> Is CasperJS a node.js library? No. CasperJS is written on top of PhantomJS, which is a node-independent Qt/WebKit based library. If you try to run your CasperJS script with node, it just won’t work out of the box.


그리고 개발하면서 느꼈던 점들과 희망사항들. 나중에 또 심심해지면 개량하자.

* 시간표 이외에 해당 강의실이 비었는지 여부를 파악할 방법이 있는가를 많이 생각했지만, 없었다. 강의실 대여 시스템이 전산화되어 있는 것도 아니고, 행사나 세미나 등으로 강의실이 사용 중인 경우는 어쩔 수 없었다. 단순히 해당 시간에 해당 강의실에 진행되는 강의가 있는지를 보여줄 뿐이다.
* 사실상 이번 건 배보다 배꼽이 더 컸다. 파이썬 스크립트 짜는 게 거의 반이였다.
* 디비의 구조는 어떻게 되며, 디비에 어떻게 저장할지, 각 row에는 어떠한 항목이 들어가는지 등을 충분히 생각하고 프로젝트를 착수해야 한다. 이건 PS에서도 배웠던 습관이다. *'IDE와 키보드를 먼저 잡으면 하수고, 펜과 노트를 먼저 잡으면 고수다'* 라는 말을 들은 적이 있다. 이게 정말 중요하다.
* 프론트엔드로 뷰나 리액트를 써 보고 싶었다. 
* GraphQL을 써 보고 싶었다. api 통신이라봐야 하나밖에 없으니 뭐... 적용이 쉬울 것 같다.
* 지금 버전은 실사용 불가 수준이다. 융복을 'IT융복합관(IT융복합공학관)'으로 부르는 사람은 아무도 없을 것이다. 많이 쓰이는 건물 약칭을 저장해두고, input 필드에서 suggestion 또는 autocomplete list가 뜨게 하면 좋겠다. 
* 각 건물에 강의실이 몇 층, 몇 호까지 있는지도 알면 좋겠다. 근데 이건 전수조사 말고는 방법이 있을까?
* 강의 중이면 언제까지 하는지, 비어 있으면 언제까지 비는지.
* 이런 것들은 개발하면서 그때그때 써 두자. 막상 만들 때는 느낀 점, 불편한 점이 엄청 많았는데, 다 만들고 보니 쓸 내용이 없다. 이러면 발전도 없다.
* 어떻게든 완성은 시켜야 안 아까울 것 같아서 대충 마무리하고 레포 만들어서 올렸다. 
* 웹은 진짜 하기 싫다. 가끔씩 하면 재밌는데, 진짜 토나온다. 하기 싫다.

웹은 진짜 하기 싫다. 중요해서 두 번 쓴다. 분명 재밌긴 한데... 이건 아니다.

긍정적으로 생각하면, 한번 해 봤으니 나중에 노드 프로젝트 할 일이 생기면 빠른 빌드업이 되지 않을까? 

